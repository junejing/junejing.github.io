<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>图片时间升级版</title>
	<style>
		*{margin: 0;padding: 0;}
		li {list-style: none;display: inline-block;width: 50px;height: 70px; position: relative;overflow: hidden;}
		img {border: 0;width: 50px;height: 70px;}
		ul {margin: 50px auto;width: 400px;font-size: 0;}
		li div {position: absolute;top: 0;left: 0;}
	</style>
	<script type="text/javascript" charset="utf-8" async defer>
		window.onload = function(){
			var oUl = document.getElementsByTagName('ul')[0],
				aLi = document.getElementsByTagName('li');

			function toTwo(n){
				return n < 10 ? '0' + n : '' + n
			}

			fnTime();

			function fnTime(){
				var myTime = new Date();
				var iHours = myTime.getHours();
				var iMinutes = myTime.getMinutes();
				var iSeconds = myTime.getSeconds();
				var str = toTwo(iHours) + ':' + toTwo(iMinutes) + ':' + toTwo(iSeconds);

				function fnFlip(li, idx){
					var oDiv = li.getElementsByTagName('div')[0],
						aImg = li.getElementsByTagName('img');

					if (str.charAt(idx) == ':'){
						aImg[0].src = 'images/colon.JPG';
						setTimeout(function(){
							aImg[0].src = 'images/colon2.jpg';
						}, 500)
					} else {
						aImg[1].src = 'images/' + str.charAt(idx) + '.JPG';
						if(aImg[0].src != aImg[1].src) {
							doMove(oDiv, 'top', 10, -70, function(){
								aImg[0].src = aImg[1].src;
								oDiv.style.top = 0 + 'px';
							})
						}
					}
				}

			    for(var i=0; i<aLi.length; i++){
					fnFlip(aLi[i], i);
				}
	
			}

			setInterval(fnTime, 1000);

		function getStyle(obj, attr){  //attr样式名称
            return obj.currentStyle ? obj.currentStyle[attr] : getComputedStyle(obj)[attr];
        }
    
        function doMove ( obj, attr, dir, target, endFn ) {
            dir = parseInt(getStyle( obj, attr )) < target ? dir : -dir;
            clearInterval( obj.timer );
            obj.timer = setInterval(function () {
                var speed = parseInt(getStyle( obj, attr )) + dir;
                if ( speed > target && dir > 0 ||  speed < target && dir < 0  ) {
                    speed = target;
                }
                obj.style[attr] = speed + 'px';
                if ( speed == target ) {
                    clearInterval( obj.timer );
                    endFn && endFn();
                }
            }, 30);
        }      

	}
	</script>
</head>
<body>
	<ul>
		<li>
			<div>
				<img src="images/0.JPG" alt="">
				<img src="images/0.JPG" alt="">
			</div>
		</li>
		<li>
			<div>
				<img src="images/0.JPG" alt="">
				<img src="images/0.JPG" alt="">
			</div>
		</li>
		<li>
			<div>
				<img src="images/colon.JPG" alt="">
			</div>
		</li>
		<li>
			<div>
				<img src="images/0.JPG" alt="">
				<img src="images/0.JPG" alt="">
			</div>
		</li>
		<li>
			<div>
				<img src="images/0.JPG" alt="">
				<img src="images/0.JPG" alt="">
			</div>
		</li>
		<li>
			<div>
				<img src="images/colon.JPG" alt="">
			</div>
		</li>
		<li>
			<div>
				<img src="images/0.JPG" alt="">
				<img src="images/0.JPG" alt="">
			</div>
		</li>
		<li>
			<div>
				<img src="images/0.JPG" alt="">
				<img src="images/0.JPG" alt="">
			</div>
		</li>
	</ul>
</body>
</html>