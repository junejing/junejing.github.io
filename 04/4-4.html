<!DOCTYPE html>
<html>
<head>
	<title>图片随机滚播</title>
	<meta name="name" charset=utf-8 content="content">
	<style type="text/css" media="screen">
		*{margin: 0;padding: 0;}
		li{list-style: none;}
		img{width: 100px;height: 50px;}
		#wrapper{width: 220px;height: 50px;margin: 50px auto;position: relative;}
        li{width: 100px;height: 50px;display: inline-block;overflow: hidden;position: relative;}
        #wrapper div{top: 0;left: 0;position: absolute;}
	</style>
	<script type="text/javascript" charset="utf-8" async defer>
    window.onload = function(){
		var aLi = document.getElementsByTagName('li');
		var flag = 0;

		for(var i=0; i<aLi.length; i++){
			fnSlide(aLi[i]);
		}

		function fnSlide(li){
			var oDiv = li.getElementsByTagName('div')[0];
			function fnSlideOnce(){
				setTimeout(function(){
					flag = flag == 0 ? -50 : 0;
					doMove(oDiv, 'top', 10, flag, fnSlideOnce);
				}, Math.round(Math.random() * 2000 + 1000));
			}
			fnSlideOnce();				
		}

		function getStyle ( obj, attr ) { return obj.currentStyle?obj.currentStyle[attr] : getComputedStyle( obj )[attr]; }
	
        function doMove ( obj, attr, dir, target, endFn ) {
	        dir = parseInt(getStyle( obj, attr )) < target ? dir : -dir;
	        clearInterval( obj.timer );
	        obj.timer = setInterval(function () {
		        var speed = parseInt(getStyle( obj, attr )) + dir;
		        if ( speed > target && dir > 0 ||  speed < target && dir < 0  ) {
		        	speed = target;
		        }
		        obj.style[attr] = speed + 'px';
		        if ( speed == target ) {
		         	clearInterval( obj.timer );
		    	    endFn && endFn();
		        }
		    }, 30);
        }

	}
</script>
</head>
<body>
    <div id="wrapper">
    	<ul>
    		<li>
    			<div>
    			    <img src='images/20.jpg'/>
    			    <img src='images/21.jpg'/>	
    			</div>
    		</li>
    		<li>
    			<div>
    			    <img src='images/22.jpg'/>
    			    <img src='images/23.jpg'/>	
    			</div>
    		</li>
    		<li>
    			<div>
    			    <img src='images/24.jpg'/>
    			    <img src='images/25.jpg'/>	
    			</div>
    		</li>
    		<li>
    			<div>
    			    <img src='images/26.jpg'/>
    			    <img src='images/27.jpg'/>	
    			</div>
    		</li>
    		<li>
    			<div>
    			    <img src='images/28.jpg'/>
    			    <img src='images/29.jpg'/>	
    			</div>
    		</li>
    		<li>
    			<div>
    			    <img src='images/30.jpg'/>
    			    <img src='images/31.jpg'/>	
    			</div>
    		</li>
    		<li>
    			<div>
    			    <img src='images/32.jpg'/>
    			    <img src='images/33.jpg'/>	
    			</div>
    		</li>
    		<li>
    			<div>
    			    <img src='images/34.jpg'/>
    			    <img src='images/35.jpg'/>	
    			</div>
    		</li>
    	</ul>
    </div>
</body>
</html>
